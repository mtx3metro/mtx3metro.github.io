define("lib/mtx3/core/ajax",["require","exports"],function(e,t){var n;!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.TIMEOUT=2]="TIMEOUT"}(n||(n={}));var i=function(){function e(){}return e.get=function(t){return new Promise(function(i,o){var r=new XMLHttpRequest;r.open("GET",t,!0),r.timeout=e.TIMEOUT,r.ontimeout=function(){o({status:n.TIMEOUT,data:{}})},r.onerror=function(e){o({status:e,data:{}})},r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)try{i({status:n.SUCCESS,data:JSON.parse(r.responseText)})}catch(e){console.error("Error processing request:",e),o({status:n.ERROR,data:{}})}else o({status:n.ERROR,data:{}})},r.send(null)})},e.TIMEOUT=3e4,e}();t.Ajax=i}),define("lib/mtx3/core/frame",["require","exports"],function(e,t){var n=function(){function e(){var e=this;this.frameCallback=function(){for(var t,n=e._queue.length,i=Date.now();n--;)t=e._queue[n],i>=t.t&&t.c(i-t.t,!1)&&e._queue.splice(n,1);return i},this.process=function(){e.frameCallback(),e._isActive&&(e._frame.call(window,e.process.bind(e)),e._isActive=0!==e._queue.length)},this._queue=[]}return e.prototype.timer=function(t,n){var i,o=Date.now();if(n)return i=t?Date.now()+t:Date.now(),this._queue.push({c:n,t:i,id:o,cancelled:!1}),this._isActive||(this._frame=this._frame||e.getFrame(),this._isActive=!0,this._frame.call(window,this.process.bind(this))),o},e.prototype.stop=function(e){for(var t=this._queue.length,n=Date.now();t--;)if(this._queue[t].id===e)return this._queue[t].c(n-this._queue[t].t,!0),this._queue.splice(t,1),!0;return!1},e.getFrame=function(){return"requestAnimationFrame"in window?window.requestAnimationFrame:function(e){setTimeout(e,17)}},e}();t.Frame=n}),define("lib/mtx3/interfaces/touch",["require","exports"],function(e,t){!function(e){e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.UP=3]="UP",e[e.DOWN=4]="DOWN",e[e.NONE=5]="NONE"}(t.TouchDirection||(t.TouchDirection={}));t.TouchDirection;!function(e){e[e.START=1]="START",e[e.MOVE=2]="MOVE",e[e.END=3]="END",e[e.CANCEL=4]="CANCEL",e[e.DBLTAP=5]="DBLTAP"}(t.TouchEventType||(t.TouchEventType={}));t.TouchEventType}),define("lib/mtx3/core/matrix",["require","exports"],function(e,t){var n=function(){function e(){function e(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}this.m=e(),this.a=e(),this.b=e()}return e.prototype.set=function(e,t){e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]},e.prototype.multiply=function(e,t,n){var i=e[0],o=e[4],r=e[8],a=e[12],s=e[1],d=e[5],l=e[9],c=e[13],h=e[2],u=e[6],C=e[10],L=e[14],S=e[3],p=e[7],m=e[11],g=e[15],y=t[0],f=t[4],_=t[8],T=t[12],v=t[1],A=t[5],D=t[9],E=t[13],w=t[2],N=t[6],M=t[10],R=t[14],x=t[3],V=t[7],W=t[11],I=t[15];return n[0]=i*y+o*v+r*w+a*x,n[4]=i*f+o*A+r*N+a*V,n[8]=i*_+o*D+r*M+a*W,n[12]=i*T+o*E+r*R+a*I,n[1]=s*y+d*v+l*w+c*x,n[5]=s*f+d*A+l*N+c*V,n[9]=s*_+d*D+l*M+c*W,n[13]=s*T+d*E+l*R+c*I,n[2]=h*y+u*v+C*w+L*x,n[6]=h*f+u*A+C*N+L*V,n[10]=h*_+u*D+C*M+L*W,n[14]=h*T+u*E+C*R+L*I,n[3]=S*y+p*v+m*w+g*x,n[7]=S*f+p*A+m*N+g*V,n[11]=S*_+p*D+m*M+g*W,n[15]=S*T+p*E+m*R+g*I,n},e.prototype.current=function(){return this.m},e.prototype.copy=function(e,t){for(var n=e.length;n--;)t[n]=e[n]},e.prototype.identity=function(){return this.set(this.m,new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),this},e.prototype.translate=function(e){return this.copy(this.m,this.a),this.set(this.b,new Float32Array([1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1])),this.multiply(this.a,this.b,this.m),this},e.prototype.rotateX=function(e){var t=Math.cos(e),n=Math.sin(e);return this.copy(this.m,this.a),this.set(this.b,new Float32Array([1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1])),this.multiply(this.a,this.b,this.m),this},e.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e);return this.copy(this.m,this.a),this.set(this.b,new Float32Array([t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1])),this.multiply(this.a,this.b,this.m),this},e.prototype.rotateY=function(e){var t=Math.cos(e),n=Math.sin(e);return this.copy(this.m,this.a),this.set(this.b,new Float32Array([t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1])),this.multiply(this.a,this.b,this.m),this},e.prototype.rotateZ=function(e){var t=Math.cos(e),n=Math.sin(e);return this.copy(this.m,this.a),this.set(this.b,new Float32Array([t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1])),this.multiply(this.a,this.b,this.m),this},e.prototype.scale=function(e){return this.copy(this.m,this.a),this.set(this.b,new Float32Array([e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1])),this.multiply(this.a,this.b,this.m),this},e.prototype.position=function(e){return arguments.length?(this.m[12]=e.x,this.m[13]=e.y,this.m[14]=e.z,{x:this.m[12],y:this.m[13],z:this.m[14]}):{x:this.m[12],y:this.m[13],z:this.m[14]}},e.prototype.toCss=function(){for(var e="matrix3d(",t=0;15>t;++t)e+=this.m[t].toFixed(5)+",";return e+=this.m[t].toFixed(5)+")"},e.prototype.toCssSafari=function(){for(var e="matrix3d(",t=0;15>t;++t)e+=Math.abs(this.m[t])<1e-4?"0,":this.m[t].toFixed(5)+",";return e+=this.m[t].toFixed(5)+")"},e}();t.Matrix=n}),define("lib/mtx3/utils/domUtils",["require","exports"],function(e,t){var n=function(){function e(){}return e.isList=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)},e.handleAddRemove=function(t,n,i,o){for(var r=i.split(" "),a=-1,s=-1,d=r.length,l=e.isList(n)?n:[].concat(n);++a<l.length;)for(s=-1;++s<d;)t?l[a].addEventListener(r[s],o):l[a].removeEventListener(r[s],o);return this},e.addClass=function(t,n){if(!t||2!==arguments.length)return this;for(var i=n.split(" "),o=-1,r=-1,a=i.length,s=e.isList(t)?t:[].concat(t);++o<s.length;)for(r=-1;++r<a;)i[r].length>0&&!s[o].classList.contains(i[r])&&s[o].classList.add(i[r]);return this},e.removeClass=function(t,n){if(!t||2!==arguments.length)return this;for(var i=n.split(" "),o=-1,r=-1,a=i.length,s=e.isList(t)?t:[].concat(t);++o<s.length;)for(r=-1;++r<a;)i[r].length>0&&s[o].classList.contains(i[r])&&s[o].classList.remove(i[r]);return this},e.toggleClass=function(t,n){if(!t||2!==arguments.length)return this;for(var i=n.split(" "),o=-1,r=-1,a=i.length,s=e.isList(t)?t:[].concat(t);++o<s.length;)for(r=-1;++r<a;)i[r].length>0&&s[o].classList.contains(i[r])?s[o].classList.remove(i[r]):s[o].classList.add(i[r]);return this},e.addListener=function(e,t,n){return 3!==arguments.length?this:(this.handleAddRemove(!0,e,t,n),this)},e.removeListener=function(e,t,n){return 3!==arguments.length?this:(this.handleAddRemove(!1,e,t,n),this)},e.closest=function(e,t){for(;e&&e.classList&&!e.classList.contains(t);)e=e.parentElement;return e},e.style=function(t,n){var i=-1,o=e.isList(t)?t:[].concat(t);if(!t)return this;for(;++i<o.length;)for(var r in n)n.hasOwnProperty(r)&&(o[i].style[r]=n[r]);return this},e.getStyleValue=function(e,t){return e&&t?window.getComputedStyle(e,null).getPropertyValue(t):""},e.matrixTransform=function(e,t){var n=t.toCss();return e.style.transform=n,e.style.webkitTransform=n,this},e.remove=function(t){for(var n,i=e.isList(t)?t:[].concat(t),o=-1;++o<i.length;)n=i[o],n.parentNode.removeChild(n);return this},e.removeChild=function(t){for(var n,i=e.isList(t)?t:[].concat(t),o=-1;++o<i.length;)for(n=i[o];n&&n.firstChild;)n.removeChild(n.firstChild);return this},e.HTMLList=function(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;)e[t].nodeType===Node.ELEMENT_NODE&&i.push(e[t]);return i},e}();t.DomUtils=n}),define("lib/mtx3/core/touch",["require","exports","../interfaces/touch","../utils/domUtils"],function(e,t,n,i){var o=function(){function e(){var t=this;this._horizontal=!0,this._vertical=!0,this._threshold=10,this.swipeAllow=function(e){return(e!==n.TouchDirection.LEFT&&e!==n.TouchDirection.RIGHT||!t._horizontal)&&(e!==n.TouchDirection.UP&&e!==n.TouchDirection.DOWN||!t._vertical)?!1:!0},this.swipeDistance=function(e,t){var n=Math.round(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)));return isNaN(n)?0:n},this.swipeAngle=function(e,t){var n=Math.atan2(t.y-e.y,e.x-t.x),i=Math.round(180*n/Math.PI);return 0>i?i=360-Math.abs(i):i},this.swipeDirection=function(e,i){var o=t.swipeAngle(e,i);return 45>=o&&o>=0?n.TouchDirection.LEFT:360>=o&&o>=315?n.TouchDirection.LEFT:o>=135&&225>=o?n.TouchDirection.RIGHT:o>45&&135>o?n.TouchDirection.DOWN:n.TouchDirection.UP},this.swipeEvent=function(e,t,n,i){return{direction:t,distance:Math.round(i),position:n,type:e}},this.trigger=function(e,n){t._container.dispatchEvent(new CustomEvent("mtx3-swipe",{detail:{type:e.type,message:e,time:Date.now(),original:n},bubbles:!1,cancelable:!0}))},this.initDistances=function(){var e={};return e[n.TouchDirection.LEFT]={d:0},e[n.TouchDirection.RIGHT]={d:0},e[n.TouchDirection.UP]={d:0},e[n.TouchDirection.DOWN]={d:0},e},this.handleStart=function(i){var o=Date.now();return i.stopPropagation(),i.preventDefault(),t._active&&o-t._lastTime<e.TOUCH_DBL_TME?void t.trigger(t.swipeEvent(n.TouchEventType.DBLTAP,n.TouchDirection.NONE,t._lastPos,0),i):(t._active=!0,t._direction=null,t._distancesActive=t.initDistances(),t._lastPos=t.swipePosition(i),t._lastTime=o,void t.trigger(t.swipeEvent(n.TouchEventType.START,n.TouchDirection.NONE,t._lastPos,0),i))},this.handleMove=function(i){if(t._active&&t._lastPos){i.stopPropagation(),i.preventDefault();var o=Date.now(),r=t.swipePosition(i),a=t.swipeDistance(t._lastPos,r),s=o-t._lastTime,d=0;if(a<e.TOUCH_DBL_MAX&&s<e.TOUCH_DBL_TME&&s>0)return void t.trigger(t.swipeEvent(n.TouchEventType.DBLTAP,n.TouchDirection.NONE,r,0));if(a>0){if(d=a/(o-t._lastTime)/2,a+=isFinite(a)?0:100*d,t._direction=t.swipeDirection(t._lastPos,r),t._distancesActive[t._direction].d+=a,!r.isPinch&&t._distancesActive[t._direction].d<t._threshold)return;if(t.swipeAllow(t._direction)){var l=t._distancesActive[t._direction].d%t._threshold;t._distancesActive[t._direction].d=t._distancesActive[t._direction].d-l,t.trigger(t.swipeEvent(n.TouchEventType.MOVE,t._direction,r,t._distancesActive[t._direction].d)),t._distancesActive[t._direction].d=l}}t._lastPos=r,t._lastTime=o}},this.handleEnd=function(e){if(t._active){e.stopPropagation(),e.preventDefault();var i=Date.now(),o=t.swipePosition(e),r=t.swipeDistance(t._lastPos,o),a=0;r>0&&(a=r/(i-t._lastTime)/2,r+=isFinite(r)?0:100*a,t._direction=t.swipeDirection(t._lastPos,o),t._distancesActive[t._direction].d+=r),t.swipeAllow(t._direction)&&t.trigger(t.swipeEvent(n.TouchEventType.END,t._direction,o,t._distancesActive[t._direction].d)),t._active=!1,t._lastPos=null}},this.handleLeave=function(){t._active=!1,t._lastPos=null},this.handleCancel=function(i){t._active=!1,t._lastPos=e.initialPosition(),t.trigger(t.swipeEvent(n.TouchEventType.CANCEL,n.TouchDirection.NONE,t._lastPos,0),i)}}return e.prototype.swipePosition=function(e){var t,n=[],i=[],o=-1;if(t=e.touches&&e.touches.length?e.touches:[e],1===t.length)return{isPinch:!1,scale:1,x:t[0].clientX,y:t[0].clientY};for(;++o<t.length;)n.push(t[o].clientX),i.push(t[o].clientY);return{isPinch:!0,scale:e.scale?e.scale:1,x:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2,y:(Math.min.apply(Math,i)+Math.max.apply(Math,i))/2}},e.prototype.container=function(e){return arguments.length?(this._container=e,this):this._container},e.prototype.horizontal=function(e){return arguments.length?(this._horizontal=e,this):this._horizontal},e.prototype.vertical=function(e){return arguments.length?(this._vertical=e,this):this._vertical},e.prototype.threshold=function(e){return arguments.length?(this._threshold=e,this):this._threshold},e.prototype.start=function(){return this._lastPos=e.initialPosition(),this._lastTime=0,this._active=!1,i.DomUtils.addListener(this._container,"touchstart mousedown",this.handleStart),i.DomUtils.addListener(this._container,"touchmove mousemove",this.handleMove),i.DomUtils.addListener(this._container,"touchleave mouseleave",this.handleEnd),i.DomUtils.addListener(this._container,"touchend mouseup",this.handleEnd),i.DomUtils.addListener(this._container,"touchcancel",this.handleCancel),this},e.prototype.destroy=function(){return i.DomUtils.removeListener(this._container,"touchstart mousedown",this.handleStart),i.DomUtils.removeListener(this._container,"touchmove mousemove",this.handleMove),i.DomUtils.removeListener(this._container,"touchleave mouseleave",this.handleEnd),i.DomUtils.removeListener(this._container,"touchend mouseup",this.handleEnd),i.DomUtils.removeListener(this._container,"touchcancel",this.handleCancel),this},e.TOUCH_MVE_MIN=30,e.TOUCH_DBL_MAX=10,e.TOUCH_DBL_TME=300,e.initialPosition=function(){return{isPinch:!1,scale:1,x:0,y:0}},e}();t.Touch=o}),define("lib/mtx3/utils/DomUtils",["require","exports"],function(e,t){var n=function(){function e(){}return e.isList=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)},e.handleAddRemove=function(t,n,i,o){for(var r=i.split(" "),a=-1,s=-1,d=r.length,l=e.isList(n)?n:[].concat(n);++a<l.length;)for(s=-1;++s<d;)t?l[a].addEventListener(r[s],o):l[a].removeEventListener(r[s],o);return this},e.addClass=function(t,n){if(!t||2!==arguments.length)return this;for(var i=n.split(" "),o=-1,r=-1,a=i.length,s=e.isList(t)?t:[].concat(t);++o<s.length;)for(r=-1;++r<a;)i[r].length>0&&!s[o].classList.contains(i[r])&&s[o].classList.add(i[r]);return this},e.removeClass=function(t,n){if(!t||2!==arguments.length)return this;for(var i=n.split(" "),o=-1,r=-1,a=i.length,s=e.isList(t)?t:[].concat(t);++o<s.length;)for(r=-1;++r<a;)i[r].length>0&&s[o].classList.contains(i[r])&&s[o].classList.remove(i[r]);return this},e.toggleClass=function(t,n){if(!t||2!==arguments.length)return this;for(var i=n.split(" "),o=-1,r=-1,a=i.length,s=e.isList(t)?t:[].concat(t);++o<s.length;)for(r=-1;++r<a;)i[r].length>0&&s[o].classList.contains(i[r])?s[o].classList.remove(i[r]):s[o].classList.add(i[r]);return this},e.addListener=function(e,t,n){return 3!==arguments.length?this:(this.handleAddRemove(!0,e,t,n),this)},e.removeListener=function(e,t,n){return 3!==arguments.length?this:(this.handleAddRemove(!1,e,t,n),this)},e.closest=function(e,t){for(;e&&e.classList&&!e.classList.contains(t);)e=e.parentElement;return e},e.style=function(t,n){var i=-1,o=e.isList(t)?t:[].concat(t);if(!t)return this;for(;++i<o.length;)for(var r in n)n.hasOwnProperty(r)&&(o[i].style[r]=n[r]);return this},e.getStyleValue=function(e,t){return e&&t?window.getComputedStyle(e,null).getPropertyValue(t):""},e.matrixTransform=function(e,t){var n=t.toCss();return e.style.transform=n,e.style.webkitTransform=n,this},e.remove=function(t){for(var n,i=e.isList(t)?t:[].concat(t),o=-1;++o<i.length;)n=i[o],n.parentNode.removeChild(n);return this},e.removeChild=function(t){for(var n,i=e.isList(t)?t:[].concat(t),o=-1;++o<i.length;)for(n=i[o];n&&n.firstChild;)n.removeChild(n.firstChild);return this},e.HTMLList=function(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;)e[t].nodeType===Node.ELEMENT_NODE&&i.push(e[t]);return i},e}();t.DomUtils=n}),define("lib/mtx3/core/tween",["require","exports","../core/frame","../core/matrix","../utils/DomUtils"],function(e,t,n,i,o){!function(e){e[e.LINEAR=1]="LINEAR",e[e.EASE_OUT_BOUNCE=2]="EASE_OUT_BOUNCE",e[e.EASE_OUT_QUAD=3]="EASE_OUT_QUAD",e[e.EASE_IN_QUAD=4]="EASE_IN_QUAD"}(t.TweenEasing||(t.TweenEasing={}));var r=t.TweenEasing,a=function(){function e(){var t=this;this._duration=e.TWEEN_DURATION,this._interpolates=[],this.execute=function(){e.TWEEN_FRAME.timer(0,function(e,n){var i=e>t._duration||n;return t._interpolates.forEach(function(t){t(e,i)}),i&&t._completeCb&&t._completeCb(),i})}}return e.getEasing=function(t){switch(t){case r.LINEAR:return e.linear;case r.EASE_OUT_BOUNCE:return e.easeOutBounce;case r.EASE_OUT_QUAD:return e.easeOutQuad;case r.EASE_IN_QUAD:return e.easeInQuad;default:return null}},e.easeOutBounce=function(e,t,n,i){return(e/=i)<1/2.75?7.5625*n*e*e+t:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},e.linear=function(e,t,n,i){return n*e/i+t},e.easeOutQuad=function(e,t,n,i){return e/=i,-n*e*(e-2)+t},e.easeInQuad=function(e,t,n,i){return n*(e/=i)*e+t},e.prototype.complete=function(e){return this._completeCb=e,this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.selected=function(e){return this._elements=e,this},e.prototype.element=function(e){return this._elements=[e],this},e.prototype.easing=function(t){return this._easing=e.getEasing(t),this},e.prototype.style=function(t,n){var i=this;return this._elements.forEach(function(r){var a=o.DomUtils.getStyleValue(r,t).match(e.TWEEN_STYLE_UNITS_REGEX),s=parseFloat(a[1])||0,d=a[2]||"",l=function(n,o,r,a){return function(s,d){var l=0,c=e.calcDistance(o,r);l=d?c:i._easing(s,0,c,i._duration),l=o>r?o-l:o+l,n.style.setProperty(t,l+a)}};i._interpolates.push(l(r,s,n,d))}),this},e.prototype.translate=function(t){var n,r=this,a={x:0,y:0,z:0},s={x:0,y:0,z:0},d=this._elements[0];if(d){if(n=o.DomUtils.getStyleValue(d,"transform"),n&&"none"!==n){var l=n.match(e.TWEEN_STYLE_NUMBERS_REGEX);16===l.length?(a.x=parseInt(l[13],10),a.y=parseInt(l[14],10),a.z=parseInt(l[15],10)):(a.x=parseInt(l[4],10),a.y=parseInt(l[5],10))}s.x=e.calcDistance(a.x,t.x),s.y=e.calcDistance(a.y,t.y),s.z=e.calcDistance(a.z,t.z);var c=function(e){var n=new i.Matrix,l=function(e,t,n,i,o){var a=t?i:r._easing(e,0,i,r._duration);return n>o?n-a:n+a};return function(e,i){var r=n.position();r.x=l(e,i,a.x,s.x,t.x),r.y=l(e,i,a.y,s.y,t.y),r.z=l(e,i,a.z,s.z,t.z),n.identity().translate(r),o.DomUtils.matrixTransform(d,n)}};return this._interpolates.push(c(t)),this}},e.prototype.start=function(){return this.execute(),this},e.TWEEN_DURATION=300,e.TWEEN_STYLE_UNITS_REGEX=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/,e.TWEEN_STYLE_NUMBERS_REGEX=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,e.TWEEN_FRAME=new n.Frame,e.calcDistance=function(e,t){var n=e-t;return 0>n?-1*n:n},e}();t.Tween=a}),define("lib/mtx3/utils/Utils",["require","exports","./domUtils"],function(e,t,n){var i=function(){function e(){}return e.toRadians=function(e){return e*(Math.PI/180)},e.toDegrees=function(e){return e*(180/Math.PI)},e.extend=function(e){var t,n=[].slice.call(arguments,1);return n.forEach(function(n){for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}),e},e.createInstance=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=Object.create(e[t].prototype);return o.constructor.apply(o,n),o},e.createMTX3Container=function(e){var t=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div");return n.DomUtils.addClass(t,"mtx3-container"),n.DomUtils.addClass(i,"mtx3-surface"),n.DomUtils.addClass(o,"mtx3-entries"),e.appendChild(t).appendChild(i).appendChild(o),t},e}();t.Utils=i}),define("lib/mtx3/layout/carousel",["require","exports","../interfaces/touch","../core/frame","../core/matrix","../core/touch","../core/tween","../utils/domUtils","../utils/Utils"],function(e,t,n,i,o,r,a,s,d){var l=function(){function e(){var t=this;this._entries=[],this._duration=e.ANIMATE_DURATION,this.degrees=function(e){return(e%360+360)%360},this.handleClickEvents=function(e){var i,o=s.DomUtils.closest(e.target,"mtx3-entry"),r=e.clientX;o&&(i=r<o.getBoundingClientRect().left+o.getBoundingClientRect().width/2?n.TouchDirection.LEFT:n.TouchDirection.RIGHT,t._distance=t._angle,t.notifyActive(i),t.handleSwipeRotation({direction:i,distance:t._distance,position:{x:0,y:0,z:0},type:n.TouchEventType.END}))},this.handleSwipeEvents=function(e){var i=e.detail.message;switch(i.type){case n.TouchEventType.START:t._distance=0,t._frameId=0;break;case n.TouchEventType.MOVE:t._distance+=i.distance,t.handleSwipeRotation(i);break;case n.TouchEventType.END:t._distance+=i.distance,t._distance=Math.round(t._distance/t._angle)*t._angle,t.notifyActive(i.direction),t.handleSwipeRotation(i)}},this.handleSwipeRotation=function(e){var i=0,o=0,r=0;t._frameId||(t._frameId=t._frame.timer(0,function(s,d){if(s>t._duration||d){t._frameId=0;for(var l=0;l<t._entries.length;l++)t._entries[l].a=Math.round(t._entries[l].a/t._angle)*t._angle;return!0}o=a.Tween.easeOutBounce(s,0,t._distance,t._duration),i=o-i,t.rotate(e.direction===n.TouchDirection.RIGHT?i:-1*i),r+=i,i=o}))},this.rotate=function(e){for(var n,i=-1,o=t._entries.length;++i<o;)n=t._entries[i],n.a+=e,n.m.identity().rotateY(d.Utils.toRadians(n.a)).translate({x:0,y:0,z:t._radius}),s.DomUtils.matrixTransform(n.e,n.m)},this.notifyActive=function(e){for(var i,o=-1,r=t._entries.length;++o<r;)if(i=Math.round(t._entries[o].a/t._angle)*t._angle,i=t.degrees(e===n.TouchDirection.RIGHT?i+t._distance:i-t._distance),(i>359||1>i)&&t._notifyCb)return void t._notifyCb(t._entries[o].e,o)},this.circumRadius=function(e){var t=2*e,n=t,i=t,o=t,r=(n+i+o)/2,a=Math.sqrt(r*(r-n)*(r-i)*(r-o));return n*i*o/(4*a)},this.apothem=function(e,t){return Math.ceil(e/(2*Math.tan(Math.PI/t)))},this.cylinderEntryHeight=function(e,n){var i=360/e,o=t.circumRadius(n),r=Math.pow(o,2),a=r;return Math.sqrt(r+a-2*o*o*Math.cos(d.Utils.toRadians(i)))},this.renderCarousel=function(){var e,n=-1,i=0;for(e=d.Utils.createMTX3Container(t._container),e=e.querySelector(".mtx3-entries"),s.DomUtils.addClass(e,"entries"),i=t.cylinderEntryHeight(t._sides,t._radius);++n<t._sides;){var r=t._angle*n,a=new o.Matrix,l=document.createElement("div");t._entries.push({e:l,m:a,a:r}),l.className="mtx3-entry entry",l.dataset.index=String(n),e.appendChild(l),s.DomUtils.style(l,{width:i+"px",height:"100%",lineHeight:"100%",left:t._radius-i/2+"px"}),t._createCb&&t._createCb(l,n),a.identity().rotateY(d.Utils.toRadians(r)).translate({x:0,y:0,z:t._radius}),s.DomUtils.matrixTransform(l,a)}},this._frame=new i.Frame}return e.prototype.container=function(e){return arguments.length?(this._container=e,this._height=this._container.offsetHeight,this._width=this._container.offsetWidth,this._radius=this._width/2,this):this._container},e.prototype.create=function(e){return this._createCb=e,this},e.prototype.duration=function(e){return arguments.length?(this._duration=e,this):this._duration},e.prototype.notify=function(e){return this._notifyCb=e,this},e.prototype.sides=function(e){return arguments.length?(this._sides=e,this._angle=360/this._sides,this):this._sides},e.prototype.render=function(){return this.renderCarousel(),this._touch=(new r.Touch).container(this._container).vertical(!0).threshold(this._angle/3).start(),s.DomUtils.addListener(this._container,"mtx3-swipe",this.handleSwipeEvents),s.DomUtils.addListener(this._container,"click",this.handleClickEvents),this},e.ANIMATE_DURATION=1e3,e}();t.Carousel=l}),define("lib/mtx3/core/observe",["require","exports"],function(e,t){var n=function(){function e(){}return e.registerModel=function(e){e.hasOwnProperty("_observedId")||Object.defineProperty(e,"_observedId",{configurable:!1,enumerable:!1,get:function(e){return function(){return e}}(++this.uniqueId),set:function(){throw new Error("Read only property _observedId")}})},e.observeProperty=function(e,t){function n(e,t){Object.defineProperty(e,t,{get:function(){return o},set:function(t){for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);r(e._observedId,o)}})}var i=this,o={},r=function(e,t){i.notify(e,t)};for(var a in e[t])e[t].hasOwnProperty(a)&&(o[a]=e[t][a]);n(e,t)},e.notify=function(e,t){if(!this.cache)return this;var n,i=-1,o=-1,r=Array.prototype.slice.call(arguments,1),a=this.cache[e];if(a)for(o=a.length;++i<o;)(n=a[i]).fn.apply(n.scope,r,t)},e.monitor=function(e,t,n,i){var o,r=e._observedId||!1;this.registerModel(e),o=this.cache[e._observedId]||(this.cache[e._observedId]=[]),r||this.observeProperty(e,t),o.push({fn:i,scope:n||this,id:e._observedId})},e.remove=function(e){var t,n=0;if(t=this.cache[e._observedId])for(delete this.cache[e._observedId],n=t.length;n--;)t[n].id===e.id&&t.splice(n,1)},e.cache={},e.uniqueId=0,e}();t.Observer=n}),define("lib/mtx3/mtx3",["require","exports","./core/ajax","./core/frame","./layout/carousel","./core/matrix","./core/observe","./core/touch","./core/tween","./utils/domUtils","./utils/Utils","./interfaces/touch","./core/tween"],function(e,t,n,i,o,r,a,s,d,l,c,h,u){t.Ajax=n.Ajax,t.Frame=i.Frame,t.Carousel=o.Carousel,t.Matrix=r.Matrix,t.Observer=a.Observer,t.Touch=s.Touch,t.Tween=d.Tween,t.DomUtils=l.DomUtils,t.Utils=c.Utils,t.TouchDirection=h.TouchDirection,t.TouchEventType=h.TouchEventType,t.TweenEasing=u.TweenEasing}),define("app/views/BaseView",["require","exports","../../lib/mtx3/mtx3"],function(e,t,n){var i=function(){function e(){this._duration=e.ANIMATE_DURATION}return e.prototype.container=function(e){return arguments.length?(this._container=e,this):this._container},e.prototype.duration=function(e){return arguments.length?(this._duration=e,this):this._duration},e.prototype.metroLines=function(e){return arguments.length?(this._ml=e,this):this._ml},e.prototype.metroStations=function(e){return arguments.length?(this._ms=e,this):this._ms},e.prototype.render=function(){return this},e.prototype.start=function(){return n.Observer.monitor(this._ml,"active",this,this.handleModelLineUpdate),this},e.prototype.destroy=function(){return n.Observer.remove(this._ml),this},e.prototype.handleModelLineUpdate=function(e){return this},e.ANIMATE_DURATION=1e3,e}();t.BaseView=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("app/views/IncidentsView",["require","exports","./BaseView","../../lib/mtx3/mtx3"],function(e,t,n,i){var o=function(e){function t(){var n=this;e.apply(this,arguments),this._entriesMap={},this._isActive=!1,this.createIncidentsContainer=function(e,t){var n,o=document.querySelector("#tmplIncidents");n=document.importNode(o.content,!0),i.DomUtils.addClass(n.querySelector(".incident"),t.code),i.DomUtils.addClass(n.querySelector(".line"),t.code),n.querySelector(".name").textContent=t.name+" line",e.appendChild(n)},this.removePending=function(e){var o=i.DomUtils.HTMLList(n._container.querySelectorAll(".description.pending"));(new i.Tween).duration(t.TWEEN_DURATION).easing(i.TweenEasing.LINEAR).selected(o).style("opacity",0).complete(function(){i.DomUtils.removeClass(n._container.querySelectorAll(".description.pending"),"pending"),e()}).start()},this.removeIncident=function(e){var t=n._container.querySelector('.description[data-incidentid="'+e+'"]');i.DomUtils.remove(t)},this.createIncident=function(e,o){var r,a=document.querySelector("#tmplIncidentEntry"),s=n._container.querySelector(".incident."+e);r=document.importNode(a.content,!0),r.querySelector(".description").dataset.incidentid=o.id,r.querySelector(".message").textContent=o.description,r.querySelector(".dateupdate").textContent=""!==o.dateUpdate?new Date(o.dateUpdate).toLocaleString():"",s.querySelector(".descriptions").appendChild(r),(new i.Tween).duration(t.TWEEN_DURATION).easing(i.TweenEasing.LINEAR).element(s.querySelector('.description[data-incidentid="'+o.id+'"]')).style("opacity",1).start()},this.updateIncident=function(e,o){var r=n._container.querySelector(".incident."+e),a=i.DomUtils.HTMLList(r.querySelectorAll(".descriptions .description")),s=a[0];s&&s.dataset.incidentid==="default"+e?(delete n._entriesMap["default"+e],s.dataset.incidentid=o.id,s.querySelector(".message").textContent=o.description,s.querySelector(".dateupdate").textContent=o.dateUpdate,(new i.Tween).duration(t.TWEEN_DURATION).easing(i.TweenEasing.LINEAR).element(s).style("opacity",1).start()):n.createIncident(e,o)},this.renderIncidents=function(e){var t=document.createDocumentFragment();n._ml.lines.forEach(function(e){n.createIncidentsContainer(t,e)}),e.appendChild(t),n._ml.lines.forEach(function(e){var t="default"+e.code;n.createIncident(e.code,{dateUpdate:"",id:t,description:"",isValid:!0})}),i.DomUtils.addClass(e.querySelectorAll(".descriptions .description"),"pending")}}return __extends(t,e),t.prototype.render=function(){return e.prototype.render.call(this),this.renderIncidents(this._container),this},t.prototype.start=function(){return e.prototype.start.call(this),this},t.prototype.updateIncidents=function(e){var n=this,i=/([A-Z]+)/g,o={},r=(new Date).toLocaleString();if(!this._isActive)return void this.removePending(function(){n._isActive=!0,n.updateIncidents(e)});this._ml.lines.forEach(function(e){o[e.code]=!1});for(var a in this._entriesMap)this._entriesMap.hasOwnProperty(a)&&(this._entriesMap[a].isValid=!1);e.incidents.forEach(function(e){var t=e.LinesAffected.match(i);t.forEach(function(t){o[t]=!0;var i=e.IncidentID+"-"+t;n._entriesMap[i]?n._entriesMap[i].isValid=!0:(n._entriesMap[i]={dateUpdate:e.DateUpdated,id:i,description:e.Description,isValid:!0},n.updateIncident(t,n._entriesMap[i]))})});for(var a in this._entriesMap)this._entriesMap.hasOwnProperty(a)&&(this._entriesMap[a].isValid||(this.removeIncident(a),delete this._entriesMap[a]));for(var s in o)if(o.hasOwnProperty(s)&&!o[s]){var d="default"+s;this.updateIncident(s,{dateUpdate:r,id:d,description:t.DEFAULT_MESSAGE,isValid:!0})}},t.DEFAULT_MESSAGE="There are currently no alerts for this line",t.TWEEN_DURATION=500,t}(n.BaseView);t.IncidentsView=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("app/views/NavigationView",["require","exports","./BaseView","../../lib/mtx3/mtx3"],function(e,t,n,i){var o=function(e){function t(){var t=this;e.apply(this,arguments),this.handleNotifyLineCallback=function(e,n){t._ml.active={code:t._ml.lines[n].code,name:t._ml.lines[n].name}},this.handleCreateLineCallback=function(e,n){var o=document.createElement("div"),r=function(t){var n=document.createElement("span"),o=document.createElement("i");return i.DomUtils.addClass(n,"indicator-container"),i.DomUtils.addClass(o,t),i.DomUtils.style(o,{height:e.offsetHeight+"px",lineHeight:e.offsetHeight+"px"}),n.appendChild(o),n};i.DomUtils.addClass(o,"line "+t._ml.lines[n].code),o.appendChild(r("fa fa-angle-left fa-5x")),o.appendChild(r("fa fa-angle-right fa-5x")),e.appendChild(o)}}return __extends(t,e),t.prototype.render=function(){return this._carousel=(new i.Carousel).container(this._container.querySelector(".navigation-lines")).create(this.handleCreateLineCallback).notify(this.handleNotifyLineCallback).sides(6).render(),this},t.prototype.start=function(){return this},t.prototype.destroy=function(){return e.prototype.destroy.call(this),i.DomUtils.removeChild(this._container.querySelector(".navigation-lines")),this},t}(n.BaseView);t.NavigationView=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("app/views/PredictionView",["require","exports","./BaseView","../../lib/mtx3/mtx3"],function(e,t,n,i){var o=function(e){function t(){var n=this;e.call(this),this._distance=0,this._entriesMap={},this._predictionsMap={},this.handleSwipeEvents=function(e){var o=e.detail.message;switch(o.type){case i.TouchEventType.START:n._distance=0,n._frameId=0,console.log("XXX handleSwipeEvents Start:",o.type+" di:"+o.direction+" d:"+o.distance);break;case i.TouchEventType.MOVE:console.log("XXX handleSwipeEvents Move:",o.type+" di:"+o.direction+" d:"+o.distance),n._distance+=2*o.distance,n.handleSwipeSlide(o);break;case i.TouchEventType.END:n._distance+=2*o.distance,console.log("XXX handleSwipeEvents End:",o.type+" di:"+o.direction+" dd:"+n._distance),n._distance=Math.ceil(n._distance/t.AXIS_Z)*t.AXIS_Z,console.log("XXX handleSwipeEvents End:",o.type+" di:"+o.direction+" dd:"+n._distance),n.handleSwipeSlide(o)}},this.handleSwipeSlide=function(e){var o,r=0,a=0,s=0,d=0,l=0,c=0;if(!n._frameId){o=n._container.querySelectorAll(".mtx3-entry.station-entry.active"),s=o.length,d=s*t.AXIS_Z*-1;var h=function(){for(var e,i=-1,r=0;++i<s;)e=n._entriesMap[o[i].dataset.stationCode],r=e.m.position().z<r?e.m.position().z:r;return 1+(r-t.AXIS_Z)},u=function(r){var a,l=-1;for(c+=r;++l<s;){a=n._entriesMap[o[l].dataset.stationCode];var u=a.m.position().z+(e.direction===i.TouchDirection.DOWN?r:-1*r);if(e.direction===i.TouchDirection.DOWN){var C=!1;u>0?(u=h(),i.DomUtils.style(a.e.querySelector(".content"),{opacity:0})):u>-1*t.AXIS_Z&&(C=!0,
i.DomUtils.style(a.e.querySelector(".content"),{opacity:1}))}else d>u?(u=0,i.DomUtils.style(a.e.querySelector(".content"),{opacity:1})):u<=-1*t.AXIS_Z&&i.DomUtils.style(a.e.querySelector(".content"),{opacity:0});a.m.identity().translate({x:0,y:0,z:u}),i.DomUtils.matrixTransform(a.e,a.m)}};n._frameId=i.Tween.TWEEN_FRAME.timer(0,function(e,t){if(e>n._duration){n._frameId=0,u(n._distance-r);for(var s=0;s<o.length;s++){n._entriesMap[o[s].dataset.stationCode]}return!0}a=i.Tween.linear(e,0,n._distance,n._duration),r=a-r,u(r),l+=r,r=a})}},this.addPrediction=function(e,t,n){var o=document.querySelector("#tmplPrediction"),r=e.e.querySelector(".platform."+("1"===n?"a":"b")+" .predictions.entries"),a=document.importNode(o.content,!0);t.forEach(function(e){a=document.importNode(o.content,!0),i.DomUtils.addClass(a.querySelector(".entry"),e.Line),a.querySelector(".line").firstChild.textContent="--"===e.Line?"--":"",a.querySelector(".arrival").textContent=parseInt(e.Min,10)?e.Min+" min(s)":e.Min,a.querySelector(".destination").textContent=e.DestinationName,r.appendChild(a)})},this.predictionGroup=function(e,n){var i=[];return e.forEach(function(e){e.Group===n&&i.push(e)}),0===i.length&&i.push(t.defaultPrediction()),i},this.renderPredictions=function(){var e,o,r,a=(new Date).toLocaleTimeString();for(var s in n._entriesMap)n._entriesMap.hasOwnProperty(s)&&(e=n._entriesMap[s],i.DomUtils.removeChild(e.e.querySelectorAll(".predictions.entries")),r=n._predictionsMap[s]||[t.defaultPrediction()],n.addPrediction(n._entriesMap[s],n.predictionGroup(r,"1"),"1"),n.addPrediction(n._entriesMap[s],n.predictionGroup(r,"2"),"2"),(o=e.e.querySelector(".prediction-update .stamp")).innerText=a)},this.activateLine=function(e){var o=n._ms.stations[e].Stations,r=0;i.DomUtils.removeClass(n._container.querySelectorAll(".mtx3-entry.station-entry.active"),"active"),i.DomUtils.style(n._container.querySelectorAll(".mtx3-entry.station-entry .content"),{opacity:0}),o.forEach(function(o){var a=n._entriesMap[o.Code];i.DomUtils.removeClass(a.e,a.c),a.c=e,i.DomUtils.addClass(a.e,"active "+a.c),0===r&&i.DomUtils.style(a.e.querySelector(".content"),{opacity:1}),a.m.identity().translate({x:0,y:0,z:-1*r}),i.DomUtils.matrixTransform(a.e,a.m),r+=t.AXIS_Z})},this._frame=new i.Frame}return __extends(t,e),t.prototype.createStations=function(e){var t,n=document.createDocumentFragment(),i=document.querySelector("#tmplStationEntry");for(var o in this._ms.stationMap)this._ms.stationMap.hasOwnProperty(o)&&(t=this._ms.stationMap[o],this.createStation(i,n,t));e.appendChild(n),this.renderStations(e)},t.prototype.createStation=function(e,t,n){var i=document.importNode(e.content,!0);i.querySelector(".station-entry").dataset.stationCode=n.code,i.querySelector(".name").textContent=n.name,t.appendChild(i)},t.prototype.renderStations=function(e){var t,n,o=-1;for(n=e.querySelectorAll(".station-entry"),t=n.length;++o<t;)this._entriesMap[n[o].dataset.stationCode]={e:n[o],m:(new i.Matrix).identity(),c:""}},t.prototype.render=function(){var t;return this._entriesMap={},e.prototype.render.call(this),t=i.Utils.createMTX3Container(this._container),i.DomUtils.addClass(t,"main-entries"),t=t.querySelector(".mtx3-entries"),i.DomUtils.addClass(t,"main-stations"),this.createStations(t),this._touch=(new i.Touch).container(this._container).vertical(!0).horizontal(!1).threshold(5).start(),this},t.prototype.start=function(){return e.prototype.start.call(this),i.DomUtils.addListener(this._container,"mtx3-swipe",this.handleSwipeEvents),this},t.prototype.destroy=function(){return e.prototype.destroy.call(this),i.DomUtils.removeChild(this._container),this._touch&&(this._touch.destroy(),this._touch=null),i.DomUtils.removeListener(this._container,"mtx3-swipe",this.handleSwipeEvents),this},t.prototype.updatePredictions=function(e){var t=this,n=function(e){for(var n=-1,i=t._ml.lines.length;++n<i;)if(e===t._ml.lines[n].code)return!0;return!1};this._predictionsMap={},e.predictions.forEach(function(e){var i;return n(e.Line)?(i=t._predictionsMap[e.LocationCode]||[],i.push(e),void(t._predictionsMap[e.LocationCode]=i)):!0}),this.renderPredictions()},t.prototype.handleModelLineUpdate=function(e){return this.activateLine(this._ml.active.code),this},t.AXIS_Z=400,t.defaultPrediction=function(){return{Car:null,Destination:null,DestinationCode:null,DestinationName:"--",Group:null,Line:"--",LocationCode:null,LocationName:null,Min:"--"}},t}(n.BaseView);t.PredictionView=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("app/views/PredictionGridView",["require","exports","./PredictionView","../../lib/mtx3/mtx3"],function(e,t,n,i){var o=function(e){function t(){var o=this;e.apply(this,arguments),this._entriesMap={},this._grid=[],this._gridDepth=0,this._gridMaxDepth=0,this._gridMaxAxisZ=-1*n.PredictionView.AXIS_Z,this._gridZAxis=0,this._gridEntries=0,this._cols=t.DEFAULT_COLS,this._rows=t.DEFAULT_ROWS,this._maxActive=t.DEFAULT_MAX_ACTIVE,this._predictionEntries=[],this._durationSlideGrid=340,this.calcTickDistance=function(e,t,n,r,a){var s=t?r:i.Tween.linear(e,0,r,o._duration);return n>a?n-s:n+s},this.initializeGrid=function(e){for(var t=10,i=[],r=0,a=(o._container.offsetWidth-2*t)/o._cols,s=o._container.offsetHeight/o._rows,d=0;e>d;d+=1){r=d*n.PredictionView.AXIS_Z*-1;for(var l=0;l<o._rows;l+=1)for(var c=0;c<o._cols;c+=1)i.push({x:c*a+c*t,y:l*s,z:r})}o._grid=i,o._gridWidth=a},this.updateGrid=function(e){o._grid.forEach(function(t){t.z+=e})},this.entriesKey=function(e){return e.replace(/[^\\d.A-Z]/gi,"").toLowerCase()},this.handleKeyDownEvents=function(e){var t=0,i=0;switch(t=i=o._gridZAxis,e.keyCode){case 38:i+=i>(o._gridDepth-1)*n.PredictionView.AXIS_Z*-1?-1*n.PredictionView.AXIS_Z:0;break;case 40:i+=0>i?n.PredictionView.AXIS_Z:0}t!==i&&(o._gridZAxis=i,o.updateGrid(38===e.keyCode?n.PredictionView.AXIS_Z:-1*n.PredictionView.AXIS_Z),o.handleGridSlide())},this.handleGridTick=function(e,t){i.Tween.TWEEN_FRAME.timer(0,function(n,r){var a=n>e||r;for(var s in o._entriesMap)if(o._entriesMap.hasOwnProperty(s)){var d=o._entriesMap[s],l=d.m.position(),c=o._grid[d.sequence];l.x=o.calcTickDistance(n,a,d.start.x,i.Tween.calcDistance(d.start.x,c.x),c.x),l.y=o.calcTickDistance(n,a,d.start.y,i.Tween.calcDistance(d.start.y,c.y),c.y),l.z=o.calcTickDistance(n,a,d.start.z,i.Tween.calcDistance(d.start.z,c.z),c.z),d.m.identity().translate({x:l.x,y:l.y,z:l.z}),i.DomUtils.matrixTransform(d.e,d.m),t(a,d,c)}return a})},this.handleGridTickCallback=function(e,t,r){var a=t.m.position(),s=0===r.z?1:a.z>0?1-a.z/n.PredictionView.AXIS_Z:1- -1*a.z/n.PredictionView.AXIS_Z,d=0===r.z?1:a.z>0?1-a.z/n.PredictionView.AXIS_Z:1-1.5*a.z/(o._gridMaxDepth*n.PredictionView.AXIS_Z*-1);i.DomUtils.style(t.e,{opacity:d}),i.DomUtils.style(t.e.querySelector(".content"),{opacity:s}),(e&&r.z>n.PredictionView.AXIS_Z||r.z<=(o._gridMaxDepth-1)*n.PredictionView.AXIS_Z*-1)&&i.DomUtils.removeClass(t.e,"active grid")},this.handleGridSlide=function(){for(var e in o._entriesMap)if(o._entriesMap.hasOwnProperty(e)){var t=o._entriesMap[e],r=t.m.position(),a=o._grid[t.sequence];t.start.x=r.x,t.start.y=r.y,t.start.z=r.z,a.z>o._gridMaxDepth*n.PredictionView.AXIS_Z*-1&&i.DomUtils.addClass(t.e,"active grid")}o.handleGridTick(o._durationSlideGrid,o.handleGridTickCallback)},this.handleGridUpdate=function(){o._predictionEntries.forEach(function(e,t){var n=o._entriesMap[o.entriesKey(e.stationName)],r=n.m.position();n.start.x=r.x,n.start.y=r.y,n.start.z=r.z,n.sequence=t,t<o._maxActive&&(i.DomUtils.addClass(n.e,"active grid"),i.DomUtils.style(n.e,{opacity:1}),i.DomUtils.style(n.e.querySelector(".content"),{opacity:1}))}),o.handleGridTick(o._durationSlideGrid,o.handleGridTickCallback)},this.getGridPosition=function(e){var t=o._grid.length;return o._grid[(e%t+t)%t]}}return __extends(t,e),t.prototype.createStations=function(t){var i,o,r=0,a={},s=document.createDocumentFragment(),d=document.querySelector("#tmplStationEntry");for(var l in this._ms.stationMap)this._ms.stationMap.hasOwnProperty(l)&&(r+=1,i=this._ms.stationMap[l],o=this.entriesKey(i.name),a[o]||(e.prototype.createStation.call(this,d,s,i),a[o]=o));this._gridEntries=r,this._gridDepth=Math.round(this._gridEntries/(this._cols*this._rows)),this._gridMaxDepth=this._maxActive/(this._cols*this._rows),this._gridMaxAxisZ=this._gridMaxDepth*n.PredictionView.AXIS_Z*-1,this.initializeGrid(this._gridDepth),t.appendChild(s),this.renderStations(t)},t.prototype.renderStations=function(e){var t,n=-1,o=0;for(t=e.querySelectorAll(".main-stations .station-entry"),o=t.length;++n<o;){var r=this.getGridPosition(n),a=void 0,s={e:t[n],m:(new i.Matrix).identity(),c:"",sequence:n,start:{x:r.x,y:r.y,z:r.z},stationName:""};a=this._ms.stationMap[t[n].dataset.stationCode],this._entriesMap[this.entriesKey(a.name)]=s,this._predictionsMap[this.entriesKey(a.name)]=[],i.DomUtils.style(s.e,{width:this._gridWidth+"px"}),n<this._maxActive&&(i.DomUtils.addClass(s.e,"active grid"),i.DomUtils.style(s.e.querySelector(".content"),{opacity:1})),s.m.identity().translate(s.start),i.DomUtils.matrixTransform(s.e,s.m)}},t.prototype.render=function(){return e.prototype.render.call(this),this._container.focus(),this._durationSlideGrid=this._duration,i.DomUtils.addListener(this._container,"keydown",this.handleKeyDownEvents),this},t.prototype.start=function(){return e.prototype.start.call(this),this},t.prototype.destroy=function(){return e.prototype.destroy.call(this),i.DomUtils.removeListener(this._container,"keydown",this.handleKeyDownEvents),this},t.prototype.updatePredictions=function(e){var t,n=this,i=e.predictions,o=[],r=function(e){for(var t=-1,i=n._ml.lines.length;++t<i;)if(e===n._ml.lines[t].code)return!0;return!1},a=function(e,t){var i,o=!1;!e||e.length<1||(i=n._predictionsMap[e]||[],i.forEach(function(e){return e.LocationCode===t.LocationCode&&e.Min===t.Min?(o=!0,!1):void 0}),o||i.push(t),n._predictionsMap[e]=i)};for(t in this._predictionsMap)this._predictionsMap.hasOwnProperty(t)&&(this._predictionsMap[t]=[]);i=i.filter(function(e){return r(e.Line)?!0:!1}),this._ml.lines.forEach(function(e){var t=n._ms.stations[e.code].Stations;t.forEach(function(e){i.forEach(function(t){return e.Code===t.LocationCode||e.StationTogether1===t.LocationCode||e.StationTogether2===t.LocationCode?(a(n.entriesKey(e.Name),t),!0):void 0})})});for(t in this._predictionsMap)this._predictionsMap.hasOwnProperty(t)&&o.push({stationName:t,totalMins:-1,predictions:this._predictionsMap[t]});this._predictionEntries=o.sort(function(e,t){var n=function(e){return e.totalMins=0,e.predictions.forEach(function(t){e.totalMins+="BRD"===t.Min?.5:"ARR"===t.Min?1:parseInt(t.Min,10)}),e.totalMins=e.totalMins>1.5?e.totalMins/e.predictions.length:0===e.totalMins?e.totalMins=Number.MAX_VALUE:e.totalMins,e.totalMins},i=e.totalMins<0?n(e):e.totalMins,o=t.totalMins<0?n(t):t.totalMins;return o>i?-1:i>o?1:0}),this.renderPredictions(),this.handleGridUpdate()},t.prototype.handleModelLineUpdate=function(e){return this},t.DEFAULT_COLS=3,t.DEFAULT_ROWS=2,t.DEFAULT_MAX_ACTIVE=24,t}(n.PredictionView);t.PredictionGridView=o});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("app/views/MainView",["require","exports","./BaseView","./NavigationView","./PredictionView","./PredictionGridView","../../lib/mtx3/mtx3"],function(e,t,n,i,o,r,a){var s=function(e){function t(){var t=this;e.apply(this,arguments),this._isDesktop=!0,this.renderGrid=function(){var e=t._pView?!1:!0;e||(t._pView.destroy(),a.Observer.remove(t._mp),t._pView=null),t._isDesktop?(t._pView=new r.PredictionGridView,t._nView&&(t._nView.destroy(),t._nView=null)):(t._pView=new o.PredictionView,t._nView=(new i.NavigationView).metroLines(t._ml).metroStations(t._ms).container(t._container.querySelector(".section-navigation")).render()),t._pView.metroLines(t._ml).metroStations(t._ms).container(t._container.querySelector(".section-main .main-container")).duration(t._isDesktop?2e3:700).render(),e||(t._pView.start(),t._nView&&t._nView.start(),a.Observer.monitor(t._mp,"active",t._pView,t._pView.updatePredictions),t._ml.active={code:"BL",name:"Blue"})}}return __extends(t,e),t.prototype.displayMode=function(e){return arguments.length?(this._isDesktop=e,this._pView&&this.renderGrid(),this):this._isDesktop},t.prototype.metroIncidents=function(e){return arguments.length?(this._mi=e,this):this._mp},t.prototype.metroPredictions=function(e){return arguments.length?(this._mp=e,this):this._mp},t.prototype.render=function(){return this.renderGrid(),this},t.prototype.start=function(){return this._nView&&this._nView.start(),this._pView.start(),a.Observer.monitor(this._mp,"active",this._pView,this._pView.updatePredictions),this},t}(n.BaseView);t.MainView=s});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("app/views/MapView",["require","exports","./BaseView"],function(e,t,n){var i=function(e){function t(){var n=this;e.call(this),this.renderPage=function(e){n._pdf.getPage(e).then(function(e){var i=e.getViewport(t.PAGE_SCALE);i=e.getViewport(t.PAGE_WIDTH/i.width),n._canvas.height=i.height,n._canvas.width=i.width,e.render({canvasContext:n._canvas.getContext("2d"),viewport:i}).then(function(){n._container.scrollTop=n._canvas.height/4,n._container.scrollLeft=n._canvas.width/4},function(e){console.error("Error loading metro map",e)})},function(e){console.error("Error rendering page",e)})}}return __extends(t,e),t.prototype.pdfFile=function(e){return arguments.length?(this._fn=e,this):this},t.prototype.render=function(){return this._canvas=this._container.querySelector(".map-container"),this},t.prototype.start=function(){var e=this;PDFJS.workerSrc="javascript/lib/pdf.worker.js";var t=new XMLHttpRequest;return t.open("GET",this._fn,!0),t.responseType="arraybuffer",t.onload=function(){t.response&&PDFJS.getDocument(new Uint8Array(t.response)).then(function(t){e._pdf=t,e.renderPage(1)},function(e){console.error("Error displaying metro map",e)})},t.onerror=function(e){console.error("Error retrieving metro map",e)},t.send(),this},t.PAGE_WIDTH=1024,t.PAGE_SCALE=1,t}(n.BaseView);t.MapView=i});var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n};define("app/views/MenuView",["require","exports","./BaseView","../../lib/mtx3/mtx3"],function(e,t,n,i){var o=function(e){function t(){var n=this;e.apply(this,arguments),this._isActive=!1,this.displayMenu=function(){(new i.Tween).duration(t.TWEEN_DURATION).easing(i.TweenEasing.LINEAR).element(n._container).translate({x:n._isActive?0:-1*window.innerWidth,y:0,z:0}).start(),(new i.Tween).duration(t.TWEEN_DURATION).easing(i.TweenEasing.LINEAR).element(n._elemSectionMain).translate({x:n._isActive?.75*window.innerWidth:0,y:0,z:0}).complete(function(){if(n._isActive){var e=n._elemSectionMain;e.focus()}}).start(),(new i.Tween).duration(t.TWEEN_DURATION).easing(i.TweenEasing.LINEAR).element(n._elemSectionNav).translate({x:n._isActive?.75*window.innerWidth:0,y:0,z:0}).start()},this.displayAlerts=function(e){(new i.Tween).duration(t.TWEEN_DURATION).easing(i.TweenEasing.LINEAR).element(n._elemSectionAlert).translate({x:e?0:-1*window.innerWidth,y:0,z:0}).start()},this.displayMap=function(e){var n=document.querySelector(".mtx3-metro .section-map");e&&i.DomUtils.addClass(n,"show"),(new i.Tween).duration(t.TWEEN_DURATION).easing(i.TweenEasing.LINEAR).element(n).style("opacity",e?1:0).complete(function(){e||i.DomUtils.removeClass(n,"show")}).start()},this.displayInfo=function(e,o){var r=".mtx3-metro .section-info .",a=null;o&&(r+=o,a=document.querySelector(r)),(new i.Tween).duration(t.TWEEN_DURATION).easing(i.TweenEasing.LINEAR).element(n._elemSectionInfo).translate({x:e?0:-1*window.innerWidth,y:0,z:0}).complete(function(){e||(i.DomUtils.style(n._elemSectionInfo.querySelector(".info-about"),{opacity:0}),i.DomUtils.style(n._elemSectionInfo.querySelector(".info-usage"),{opacity:0}))}).start(),a&&(new i.Tween).duration(t.TWEEN_DURATION).easing(i.TweenEasing.LINEAR).element(a).style("opacity",e?1:0).start()},this.handleClickEvents=function(e){switch(e.currentTarget.dataset.menuOption){case"about":n._isActive=!n._isActive,n.displayInfo(!0,"info-about"),n.displayMap(!1),n.displayMenu();break;case"alerts":n._isActive=!n._isActive,n.displayAlerts(!0),n.displayMenu();break;case"map":n._isActive=!n._isActive,n.displayMap(!0),n.displayMenu();break;case"usage":n._isActive=!n._isActive,n.displayInfo(!0,"info-usage"),n.displayMap(!1),n.displayMenu();break;case"prediction":n._isActive=!n._isActive,n.displayMap(!1),n.displayMenu();break;default:n._isActive=!n._isActive,n.displayMenu(),n.displayAlerts(!1),n.displayInfo(!1),n.displayMap(!1)}}}return __extends(t,e),t.prototype.render=function(){return this._elemSectionAlert=document.querySelector(".mtx3-metro .section-alerts"),this._elemSectionMain=document.querySelector(".section-main"),this._elemSectionNav=document.querySelector(".section-navigation"),this._elemSectionInfo=document.querySelector(".mtx3-metro .section-info"),i.DomUtils.addListener(document.querySelector(".mtx3-metro .header-button"),"click",this.handleClickEvents),i.DomUtils.addListener(this._container.querySelectorAll(".section-menu .menu .option"),"click",this.handleClickEvents),this},t.prototype.start=function(){return this},t.TWEEN_DURATION=300,t}(n.BaseView);t.MenuView=o}),define("app/models/ModelIncidents",["require","exports"],function(e,t){var n=function(){function e(){}return e}();t.ModelIncidents=n}),define("app/models/ModelLines",["require","exports"],function(e,t){var n=function(){function e(){this.lines=[{code:"BL",name:"Blue"},{code:"GR",name:"Green"},{code:"OR",name:"Orange"},{code:"RD",name:"Red"},{code:"SV",name:"Silver"},{code:"YL",name:"Yellow"}]}return e}();t.ModelLines=n}),define("app/models/ModelPredictions",["require","exports"],function(e,t){var n=function(){function e(){}return e}();t.ModelPredictions=n}),define("app/models/ModelStations",["require","exports"],function(e,t){var n=function(){function e(){var e=this;this.stationMap={},this.stationUniqueMap={},this.createMap=function(){var t;for(t in e.stations)e.stations.hasOwnProperty(t)&&e.stations[t].Stations.forEach(function(n){e.stationMap[n.Code]||(e.stationMap[n.Code]={code:n.Code,name:n.Name,line:t})})},this.stations={BL:{Stations:[{Address:{City:"Springfield",State:"VA",Street:"6880 Frontier Drive",Zip:"22150"},Code:"J03",Lat:38.7665218926,LineCode1:"BL",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.1679701804,Name:"Franconia-Springf'ld",StationTogether1:"",StationTogether2:""},{Address:{City:"Alexandria",State:"VA",Street:"5690 Eisenhower Avenue",Zip:"22310"},Code:"J02",Lat:38.799307672,LineCode1:"BL",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.1291115237,Name:"Van Dorn St",StationTogether1:"",StationTogether2:""},{Address:{City:"Alexandria",State:"VA",Street:"1900 King Street",Zip:"22301"},Code:"C13",Lat:38.8065861172,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0608112085,Name:"King Street",StationTogether1:"",StationTogether2:""},{Address:{City:"Alexandria",State:"VA",Street:"700 N. West St.",Zip:"22301"},Code:"C12",Lat:38.8141436672,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.053667574,Name:"Braddock Road",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"2400 S. Smith Blvd.",Zip:"22202"},Code:"C10",Lat:38.8534163859,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0440422943,Name:"National Arpt",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"1750 South Clark St.",Zip:"22202"},Code:"C09",Lat:38.8579043204,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0502898097,Name:"Crystal City",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"1250 South Hayes St.",Zip:"22202"},Code:"C08",Lat:38.8618823867,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0595389215,Name:"Pentagon City",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"2 South Rotary Road",Zip:"22202"},Code:"C07",Lat:38.8694627012,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0537156734,Name:"Pentagon",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"1000 North Memorial Drive",Zip:"22211"},Code:"C06",Lat:38.8846868585,LineCode1:"BL",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0628101291,Name:"Arlington Cemetery",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"1850 N. Moore Street",Zip:"22209"},Code:"C05",Lat:38.8959790962,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0709086853,Name:"Rosslyn",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"2301 I St. NW",Zip:"20037"},Code:"C04",Lat:38.9006980092,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.050277739,Name:"Foggy Bottom",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"900 18th St. NW",Zip:"20006"},Code:"C03",Lat:38.9013128941,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0406954151,Name:"Farragut West",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1400 I St. NW",Zip:"20005"},Code:"C02",Lat:38.9013327968,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0336341721,Name:"McPherson Square",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"607 13th St. NW",Zip:"20005"},Code:"C01",Lat:38.8983144732,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0280779971,Name:"Metro Center",StationTogether1:"A01",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"302 12th St. NW",Zip:"20004"},Code:"D01",Lat:38.8931808718,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0281319984,Name:"Federal Triangle",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1200 Independence Avenue SW",Zip:"20004"},Code:"D02",Lat:38.888018702,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0280662342,Name:"Smithsonian",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"600 Maryland Avenue SW",Zip:"20024"},Code:"D03",Lat:38.8848377279,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.021908484,Name:"L'Enfant Plaza",StationTogether1:"F03",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"401 3rd Street SW",Zip:"20024"},Code:"D04",Lat:38.8850723551,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0158682169,Name:"Federal Center SW",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"355 First Street SE",Zip:"20003"},Code:"D05",Lat:38.8850625009,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0051394199,Name:"Capitol South",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"701 Pennsylvania Avenue SE",Zip:"20003"},Code:"D06",Lat:38.8846222608,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-76.9960011267,Name:"Eastern Market",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"700 14th Street SE",Zip:"20003"},Code:"D07",Lat:38.8812632736,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-76.9854953196,Name:"Potomac Avenue",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"192 19th St. SE",Zip:"20003"},Code:"D08",Lat:38.8867090898,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-76.9770889014,Name:"Stadium Armory",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"4500 Benning Road",Zip:"20019"},Code:"G01",Lat:38.890975676,LineCode1:"BL",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-76.9383648681,Name:"Benning Road",StationTogether1:"",StationTogether2:""},{Address:{City:"Capitol Heights",State:"MD",Street:"133 Central Avenue",Zip:"20743"},Code:"G02",Lat:38.8894658568,LineCode1:"BL",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-76.9118081145,Name:"Capitol Heights",StationTogether1:"",StationTogether2:""},{Address:{City:"Capitol Heights",State:"MD",Street:"100 Addison Road S.",Zip:"20743"},Code:"G03",Lat:38.8867478168,LineCode1:"BL",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-76.89410791,Name:"Addison Road",StationTogether1:"",StationTogether2:""},{Address:{City:"Landover",State:"MD",Street:"300 Garrett Morgan Blvd.",Zip:"20785"},Code:"G04",Lat:38.8938349282,LineCode1:"BL",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-76.8680747681,Name:"Morgan Blvd",StationTogether1:"",StationTogether2:""},{Address:{City:"Largo",State:"MD",Street:"Largo Town Center 9000 Lottsford Road",Zip:"20774"},Code:"G05",Lat:38.9050688072,LineCode1:"BL",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-76.8420375202,Name:"Largo Town Center",StationTogether1:"",StationTogether2:""}]},GR:{Stations:[{Address:{City:"Suitland",State:"MD",Street:"4704 Old Soper Road",Zip:"20746"},Code:"F11",Lat:38.8264463483,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9114642177,Name:"Branch Avenue",StationTogether1:"",StationTogether2:""},{Address:{City:"Suitland",State:"MD",Street:"4500 Silver Hill Road",Zip:"20746"},Code:"F10",Lat:38.8439645544,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9318701589,Name:"Suitland",StationTogether1:"",StationTogether2:""},{Address:{City:"Temple Hills",State:"MD",Street:"3101 Branch Avenue",Zip:"20748"},Code:"F09",Lat:38.8513013835,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9562627094,Name:"Naylor Road",StationTogether1:"",StationTogether2:""},{Address:{City:"Temple Hills",State:"MD",Street:"1411 Southern Avenue",Zip:"20748"},Code:"F08",Lat:38.8410857803,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9750541388,Name:"Southern Ave",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1290 Alabama Avenue SE",Zip:"20020"},Code:"F07",Lat:38.8456577028,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9885119326,Name:"Congress Height",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1101 Howard Road SE",Zip:"20020"},Code:"F06",Lat:38.8629631168,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9953707387,Name:"Anacostia",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"200 M Street SE",Zip:"20003"},Code:"F05",Lat:38.8764810849,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0050856513,Name:"Navy Yard",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"399 M Street SW",Zip:"20024"},Code:"F04",Lat:38.8764618668,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0175052088,Name:"Waterfront",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"600 Maryland Avenue SW",Zip:"20024"},Code:"F03",Lat:38.8848377279,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.021908484,Name:"L'Enfant Plaza",StationTogether1:"D03",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"701 Pennsylvania Avenue NW",Zip:"20004"},Code:"F02",Lat:38.8936652235,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0219143879,Name:"Archives",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"630 H St. NW",Zip:"20001"},Code:"F01",Lat:38.8983168097,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0219153904,Name:"Gallery Place",StationTogether1:"B01",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"700 M St. NW",Zip:"20001"},Code:"E01",Lat:38.9064368149,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0219143803,Name:"Mt Vernon Sq",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1701 8th St. NW",Zip:"20001"},Code:"E02",Lat:38.9134768711,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0219117007,Name:"Shaw",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1240 U Street NW",Zip:"20009"},Code:"E03",Lat:38.9170023992,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0274958929,Name:"U Street",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"3030 14th St. NW",Zip:"20009"},Code:"E04",Lat:38.9278379675,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0325521177,Name:"Columbia Heights",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"3700 Georgia Avenue NW",Zip:"20010"},Code:"E05",Lat:38.9374346301,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.023460904,Name:"Georgia Avenue",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"550 Galloway Street NE",Zip:"20011"},Code:"E06",Lat:38.9518467675,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0022030768,Name:"Fort Totten",StationTogether1:"B06",StationTogether2:""},{Address:{City:"Hyattsville",State:"MD",Street:"2700 Hamilton St.",Zip:"20782"},Code:"E07",Lat:38.9550401707,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9695766751,Name:"West Hyattsville",StationTogether1:"",StationTogether2:""},{Address:{City:"Hyattsville",State:"MD",Street:"3575 East West Highway",Zip:"20782"},Code:"E08",Lat:38.9653854458,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9558815078,Name:"Prince Georges Plaza",StationTogether1:"",StationTogether2:""},{Address:{City:"College Park",State:"MD",Street:"4931 Calvert Road",Zip:"20740"},Code:"E09",Lat:38.9786336339,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9281249818,Name:"College Park",StationTogether1:"",StationTogether2:""},{Address:{City:"Greenbelt",State:"MD",Street:"5717 Greenbelt Metro Drive",Zip:"20740"},Code:"E10",Lat:39.0111458605,LineCode1:"GR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9110575731,Name:"Greenbelt",StationTogether1:"",StationTogether2:""}]},OR:{Stations:[{Address:{City:"Fairfax",State:"VA",Street:"9550 Saintsbury Drive",Zip:"22031"},Code:"K08",Lat:38.8776011238,LineCode1:"OR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.2726222569,Name:"Vienna",StationTogether1:"",StationTogether2:""},{Address:{City:"Vienna",State:"VA",Street:"2700 Gallows Road",Zip:"22180"},Code:"K07",Lat:38.8836251359,LineCode1:"OR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.2271606721,Name:"Dunn Loring",StationTogether1:"",StationTogether2:""},{Address:{City:"Falls Church",State:"VA",Street:"7040 Haycock Road",Zip:"22043"},Code:"K06",Lat:38.900780551,LineCode1:"OR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.1890948225,Name:"W Falls Church",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"2001 N. Sycamore St.",Zip:"22205"},Code:"K05",Lat:38.8859531663,LineCode1:"OR",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-77.1568830199,Name:"E Falls Church",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"4230 Fairfax Drive",Zip:"22201"},Code:"K04",Lat:38.8821828738,LineCode1:"OR",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-77.113168835,Name:"Ballston",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"3600 Fairfax Drive",Zip:"22201"},Code:"K03",Lat:38.8833661518,LineCode1:"OR",
LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-77.1029772942,Name:"Virginia Square",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"3100 Wilson Blvd",Zip:"22201"},Code:"K02",Lat:38.886704839,LineCode1:"OR",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-77.0953940983,Name:"Clarendon",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"2100 Wilson Blvd",Zip:"22201"},Code:"K01",Lat:38.8901755312,LineCode1:"OR",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-77.087131231,Name:"Court House",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"1850 N. Moore Street",Zip:"22209"},Code:"C05",Lat:38.8959790962,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0709086853,Name:"Rosslyn",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"2301 I St. NW",Zip:"20037"},Code:"C04",Lat:38.9006980092,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.050277739,Name:"Foggy Bottom",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"900 18th St. NW",Zip:"20006"},Code:"C03",Lat:38.9013128941,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0406954151,Name:"Farragut West",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1400 I St. NW",Zip:"20005"},Code:"C02",Lat:38.9013327968,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0336341721,Name:"McPherson Square",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"607 13th St. NW",Zip:"20005"},Code:"C01",Lat:38.8983144732,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0280779971,Name:"Metro Center",StationTogether1:"A01",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"302 12th St. NW",Zip:"20004"},Code:"D01",Lat:38.8931808718,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0281319984,Name:"Federal Triangle",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1200 Independence Avenue SW",Zip:"20004"},Code:"D02",Lat:38.888018702,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0280662342,Name:"Smithsonian",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"600 Maryland Avenue SW",Zip:"20024"},Code:"D03",Lat:38.8848377279,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.021908484,Name:"L'Enfant Plaza",StationTogether1:"F03",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"401 3rd Street SW",Zip:"20024"},Code:"D04",Lat:38.8850723551,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0158682169,Name:"Federal Center SW",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"355 First Street SE",Zip:"20003"},Code:"D05",Lat:38.8850625009,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0051394199,Name:"Capitol South",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"701 Pennsylvania Avenue SE",Zip:"20003"},Code:"D06",Lat:38.8846222608,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-76.9960011267,Name:"Eastern Market",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"700 14th Street SE",Zip:"20003"},Code:"D07",Lat:38.8812632736,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-76.9854953196,Name:"Potomac Avenue",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"192 19th St. SE",Zip:"20003"},Code:"D08",Lat:38.8867090898,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-76.9770889014,Name:"Stadium Armory",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"4000 Minnesota Avenue NE",Zip:"20019"},Code:"D09",Lat:38.899191223,LineCode1:"OR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9467477336,Name:"Minnesota Avenue",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"4720 Minnesota Avenue NE",Zip:"20019"},Code:"D10",Lat:38.9081784965,LineCode1:"OR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.935256783,Name:"Deanwood",StationTogether1:"",StationTogether2:""},{Address:{City:"Cheverly",State:"MD",Street:"5501 Columbia Park",Zip:"20785"},Code:"D11",Lat:38.9166318546,LineCode1:"OR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.916628044,Name:"Cheverly",StationTogether1:"",StationTogether2:""},{Address:{City:"Hyattsville",State:"MD",Street:"3000 Pennsy Drive",Zip:"20785"},Code:"D12",Lat:38.9335062344,LineCode1:"OR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.8911979676,Name:"Landover",StationTogether1:"",StationTogether2:""},{Address:{City:"New Carrollton",State:"MD",Street:"4700 Garden City Drive",Zip:"20784"},Code:"D13",Lat:38.9477848558,LineCode1:"OR",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.8718412865,Name:"New Carrollton",StationTogether1:"",StationTogether2:""}]},RD:{Stations:[{Address:{City:"Rockville",State:"MD",Street:"15903 Somerville Drive",Zip:"20855"},Code:"A15",Lat:39.1199273249,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.1646273343,Name:"Shady Grove",StationTogether1:"",StationTogether2:""},{Address:{City:"Rockville",State:"MD",Street:"251 Hungerford Drive",Zip:"20850"},Code:"A14",Lat:39.0843216075,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.1461253392,Name:"Rockville",StationTogether1:"",StationTogether2:""},{Address:{City:"Rockville",State:"MD",Street:"1600 Chapman Avenue",Zip:"20852"},Code:"A13",Lat:39.0624676517,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.1208179517,Name:"Twinbrook",StationTogether1:"",StationTogether2:""},{Address:{City:"Rockville",State:"MD",Street:"5500 Marinelli Road",Zip:"20852"},Code:"A12",Lat:39.0481513573,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.112829859,Name:"White Flint",StationTogether1:"",StationTogether2:""},{Address:{City:"Bethesda",State:"MD",Street:"10300 Rockville Pike",Zip:"20852"},Code:"A11",Lat:39.02926895,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.10384972,Name:"Grosvenor",StationTogether1:"",StationTogether2:""},{Address:{City:"Bethesda",State:"MD",Street:"8810 Rockville Pike",Zip:"20814"},Code:"A10",Lat:39.0000564843,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0969522905,Name:"Medical Center",StationTogether1:"",StationTogether2:""},{Address:{City:"Bethesda",State:"MD",Street:"7450 Wisconsin Avenue",Zip:"20814"},Code:"A09",Lat:38.9843936603,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0941291922,Name:"Bethesda",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"5337 Wisconsin Avenue NW",Zip:"20015"},Code:"A08",Lat:38.9594838736,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.084995805,Name:"Friendship Heights",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"4501 Wisconsin Avenue NW",Zip:"20016"},Code:"A07",Lat:38.9488514351,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0795873255,Name:"Tenleytown",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"4200 Connecticut Avenue NW",Zip:"20008"},Code:"A06",Lat:38.9432652883,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0629861805,Name:"Van Ness UDC",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"3599 Connecticut Avenue NW",Zip:"20008"},Code:"A05",Lat:38.9347628908,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0580425191,Name:"Cleveland Park",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"2700 Connecticut Ave., NW",Zip:"20008"},Code:"A04",Lat:38.9250851371,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0524180207,Name:"Woodley Park Zoo",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1525 20th St. NW",Zip:"20036"},Code:"A03",Lat:38.9095980575,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0434143597,Name:"Dupont Circle",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1001 Connecticut Avenue NW",Zip:"20036"},Code:"A02",Lat:38.9032019462,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0397008272,Name:"Farragut North",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"607 13th St. NW",Zip:"20005"},Code:"A01",Lat:38.8983144732,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0280779971,Name:"Metro Center",StationTogether1:"C01",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"630 H St. NW",Zip:"20001"},Code:"B01",Lat:38.8983168097,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0219153904,Name:"Gallery Place",StationTogether1:"F01",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"450 F Street NW",Zip:"20001"},Code:"B02",Lat:38.8960903176,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0166389566,Name:"Judiciary Square",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"701 First St. NE",Zip:"20002"},Code:"B03",Lat:38.8977660392,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0074142921,Name:"Union Station",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"200 Florida Ave N.E.",Zip:"20002"},Code:"B35",Lat:38.9070162121,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0030204472,Name:"New York Avenue",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"919 Rhode Island Avenue NE",Zip:"20018"},Code:"B04",Lat:38.9210596891,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9959369166,Name:"Rhode Island Avenue",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"801 Michigan Avenue NE",Zip:"20017"},Code:"B05",Lat:38.9332109913,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-76.9945342851,Name:"Brookland",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"550 Galloway Street NE",Zip:"20011"},Code:"B06",Lat:38.9518467675,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0022030768,Name:"Fort Totten",StationTogether1:"E06",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"327 Cedar Street NW",Zip:"20012"},Code:"B07",Lat:38.976078531,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0181766987,Name:"Takoma",StationTogether1:"",StationTogether2:""},{Address:{City:"Silver Spring",State:"MD",Street:"8400 Colesville Road",Zip:"20910"},Code:"B08",Lat:38.9939493747,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0310178268,Name:"Silver Spring",StationTogether1:"",StationTogether2:""},{Address:{City:"Forest Glen",State:"MD",Street:"9730 Georgia Avenue",Zip:"20910"},Code:"B09",Lat:39.0149542752,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0429165548,Name:"Forest Glen",StationTogether1:"",StationTogether2:""},{Address:{City:"Silver Spring",State:"MD",Street:"11171 Georgia Avenue",Zip:"20902"},Code:"B10",Lat:39.0375271436,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0501070535,Name:"Wheaton",StationTogether1:"",StationTogether2:""},{Address:{City:"Silver Spring",State:"MD",Street:"12501 Georgia Avenue",Zip:"20906"},Code:"B11",Lat:39.0617837655,LineCode1:"RD",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0535573593,Name:"Glenmont",StationTogether1:"",StationTogether2:""}]},SV:{Stations:[{Address:{City:"Reston",State:"VA",Street:"1862 Wiehle Avenue",Zip:"20190"},Code:"N06",Lat:38.94778,LineCode1:"SV",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.34027,Name:"Wiehle-Reston East",StationTogether1:"",StationTogether2:""},{Address:{City:"Vienna",State:"VA",Street:"1576 Spring Hill Road",Zip:"22182"},Code:"N04",Lat:38.928872,LineCode1:"SV",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.241472,Name:"Spring Hill",StationTogether1:"",StationTogether2:""},{Address:{City:"Vienna",State:"VA",Street:"8305 Leesburg Pike",Zip:"22182"},Code:"N03",Lat:38.921732,LineCode1:"SV",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.234607,Name:"Greensboro",StationTogether1:"",StationTogether2:""},{Address:{City:"McLean",State:"VA",Street:"1943 Chain Bridge Road",Zip:"22102"},Code:"N02",Lat:38.920496,LineCode1:"SV",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.222262,Name:"Tysons Corner",StationTogether1:"",StationTogether2:""},{Address:{City:"McLean",State:"VA",Street:"1824 Dolley Madison Boulevard",Zip:"22102"},Code:"N01",Lat:38.924432,LineCode1:"SV",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.210295,Name:"McLean",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"2001 N. Sycamore St.",Zip:"22205"},Code:"K05",Lat:38.8859531663,LineCode1:"OR",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-77.1568830199,Name:"E Falls Church",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"4230 Fairfax Drive",Zip:"22201"},Code:"K04",Lat:38.8821828738,LineCode1:"OR",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-77.113168835,Name:"Ballston",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"3600 Fairfax Drive",Zip:"22201"},Code:"K03",Lat:38.8833661518,LineCode1:"OR",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-77.1029772942,Name:"Virginia Square",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"3100 Wilson Blvd",Zip:"22201"},Code:"K02",Lat:38.886704839,LineCode1:"OR",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-77.0953940983,Name:"Clarendon",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"2100 Wilson Blvd",Zip:"22201"},Code:"K01",Lat:38.8901755312,LineCode1:"OR",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-77.087131231,Name:"Court House",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"1850 N. Moore Street",Zip:"22209"},Code:"C05",Lat:38.8959790962,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0709086853,Name:"Rosslyn",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"2301 I St. NW",Zip:"20037"},Code:"C04",Lat:38.9006980092,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.050277739,Name:"Foggy Bottom",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"900 18th St. NW",Zip:"20006"},Code:"C03",Lat:38.9013128941,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0406954151,Name:"Farragut West",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1400 I St. NW",Zip:"20005"},Code:"C02",Lat:38.9013327968,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0336341721,Name:"McPherson Square",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"607 13th St. NW",Zip:"20005"},Code:"C01",Lat:38.8983144732,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0280779971,Name:"Metro Center",StationTogether1:"A01",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"302 12th St. NW",Zip:"20004"},Code:"D01",Lat:38.8931808718,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0281319984,Name:"Federal Triangle",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1200 Independence Avenue SW",Zip:"20004"},Code:"D02",Lat:38.888018702,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0280662342,Name:"Smithsonian",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"600 Maryland Avenue SW",Zip:"20024"},Code:"D03",Lat:38.8848377279,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.021908484,Name:"L'Enfant Plaza",StationTogether1:"F03",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"401 3rd Street SW",Zip:"20024"},Code:"D04",Lat:38.8850723551,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0158682169,Name:"Federal Center SW",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"355 First Street SE",Zip:"20003"},Code:"D05",Lat:38.8850625009,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-77.0051394199,Name:"Capitol South",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"701 Pennsylvania Avenue SE",Zip:"20003"},Code:"D06",Lat:38.8846222608,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-76.9960011267,Name:"Eastern Market",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"700 14th Street SE",Zip:"20003"},Code:"D07",Lat:38.8812632736,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-76.9854953196,Name:"Potomac Avenue",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"192 19th St. SE",Zip:"20003"},Code:"D08",Lat:38.8867090898,LineCode1:"BL",LineCode2:"OR",LineCode3:"SV",LineCode4:null,Lon:-76.9770889014,Name:"Stadium Armory",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"4500 Benning Road",Zip:"20019"},Code:"G01",Lat:38.890975676,LineCode1:"BL",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-76.9383648681,Name:"Benning Road",StationTogether1:"",StationTogether2:""},{Address:{City:"Capitol Heights",State:"MD",Street:"133 Central Avenue",Zip:"20743"},Code:"G02",Lat:38.8894658568,LineCode1:"BL",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-76.9118081145,Name:"Capitol Heights",StationTogether1:"",StationTogether2:""},{Address:{City:"Capitol Heights",State:"MD",Street:"100 Addison Road S.",Zip:"20743"},Code:"G03",Lat:38.8867478168,LineCode1:"BL",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-76.89410791,Name:"Addison Road",StationTogether1:"",StationTogether2:""},{Address:{City:"Landover",State:"MD",Street:"300 Garrett Morgan Blvd.",Zip:"20785"},Code:"G04",Lat:38.8938349282,LineCode1:"BL",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-76.8680747681,Name:"Morgan Blvd",StationTogether1:"",StationTogether2:""},{Address:{City:"Largo",State:"MD",Street:"Largo Town Center 9000 Lottsford Road",Zip:"20774"},Code:"G05",Lat:38.9050688072,LineCode1:"BL",LineCode2:"SV",LineCode3:null,LineCode4:null,Lon:-76.8420375202,Name:"Largo Town Center",StationTogether1:"",StationTogether2:""}]},YL:{Stations:[{Address:{City:"Huntington",State:"VA",Street:"2501 Huntington Ave",Zip:"22303"},Code:"C15",Lat:38.7939158529,LineCode1:"YL",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0752057891,Name:"Huntington",StationTogether1:"",StationTogether2:""},{Address:{City:"Alexandria",State:"VA",Street:"2400 Eisenhower Avenue",Zip:"22314"},Code:"C14",Lat:38.8004254497,LineCode1:"YL",LineCode2:null,LineCode3:null,LineCode4:null,Lon:-77.0708743893,Name:"Eisenhower Avenue",StationTogether1:"",StationTogether2:""},{Address:{City:"Alexandria",State:"VA",Street:"1900 King Street",Zip:"22301"},Code:"C13",Lat:38.8065861172,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0608112085,Name:"King Street",StationTogether1:"",StationTogether2:""},{Address:{City:"Alexandria",State:"VA",Street:"700 N. West St.",Zip:"22301"},Code:"C12",Lat:38.8141436672,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.053667574,Name:"Braddock Road",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"2400 S. Smith Blvd.",Zip:"22202"},Code:"C10",Lat:38.8534163859,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0440422943,Name:"National Arpt",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"1750 South Clark St.",Zip:"22202"},Code:"C09",Lat:38.8579043204,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0502898097,Name:"Crystal City",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"1250 South Hayes St.",Zip:"22202"},Code:"C08",Lat:38.8618823867,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0595389215,Name:"Pentagon City",StationTogether1:"",StationTogether2:""},{Address:{City:"Arlington",State:"VA",Street:"2 South Rotary Road",Zip:"22202"},Code:"C07",Lat:38.8694627012,LineCode1:"BL",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0537156734,Name:"Pentagon",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"600 Maryland Avenue SW",Zip:"20024"},Code:"F03",Lat:38.8848377279,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.021908484,Name:"L'Enfant Plaza",StationTogether1:"D03",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"701 Pennsylvania Avenue NW",Zip:"20004"},Code:"F02",Lat:38.8936652235,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0219143879,Name:"Archives",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"630 H St. NW",Zip:"20001"},Code:"F01",Lat:38.8983168097,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0219153904,Name:"Gallery Place",StationTogether1:"B01",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"700 M St. NW",Zip:"20001"},Code:"E01",Lat:38.9064368149,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0219143803,Name:"Mt Vernon Sq",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1701 8th St. NW",Zip:"20001"},Code:"E02",Lat:38.9134768711,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0219117007,Name:"Shaw",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"1240 U Street NW",Zip:"20009"},Code:"E03",Lat:38.9170023992,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0274958929,Name:"U Street",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"3030 14th St. NW",Zip:"20009"},Code:"E04",Lat:38.9278379675,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0325521177,Name:"Columbia Heights",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"3700 Georgia Avenue NW",Zip:"20010"},Code:"E05",Lat:38.9374346301,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.023460904,Name:"Georgia Avenue",StationTogether1:"",StationTogether2:""},{Address:{City:"Washington",State:"DC",Street:"550 Galloway Street NE",Zip:"20011"},Code:"E06",Lat:38.9518467675,LineCode1:"GR",LineCode2:"YL",LineCode3:null,LineCode4:null,Lon:-77.0022030768,Name:"Fort Totten",StationTogether1:"B06",StationTogether2:""}]}},this.createMap()}return e}();t.ModelStations=n}),define("app/MetroServices",["require","exports","../lib/mtx3/mtx3"],function(e,t,n){var i=function(){function e(){}return e.predictions=function(){return new Promise(function(t,i){n.Ajax.get(e.URL_API_PREDICTION).then(function(e){t({predictions:e.data.Trains})},function(e){i(e)})})},e.incidents=function(){return new Promise(function(t,i){n.Ajax.get(e.URL_API_INCIDENTS).then(function(e){t({incidents:e.data.Incidents})},function(e){i(e)})})},e.URL_API="https://api.wmata.com/",e.URL_API_KEY="jv48qqz457nwk2xrh8fffzjz",e.URL_API_PREDICTION=e.URL_API+"StationPrediction.svc/json/GetPrediction/All?api_key="+e.URL_API_KEY,e.URL_API_INCIDENTS=e.URL_API+"Incidents.svc/json/Incidents?api_key="+e.URL_API_KEY,e}();t.MetroServices=i}),define("app/MetroController",["require","exports","./views/IncidentsView","./views/MainView","./views/MapView","./views/MenuView","./models/ModelIncidents","./models/ModelLines","./models/ModelPredictions","./models/ModelStations","./MetroServices","../lib/mtx3/mtx3"],function(e,t,n,i,o,r,a,s,d,l,c,h){var u=function(){function e(){var t=this;this._interval=e.PREDICTION_INTERVER,this._intervalId=0,this._mql=window.matchMedia("(min-width: 424px)"),this._isDesktop=this._mql.matches,this.handleMatchMedia=function(e){console.log("XXX match media..."),e.matches!==t._isDesktop&&t._mView.displayMode(t._mql.matches),t._isDesktop=t._mql.matches},this._container=document.querySelector(".mtx3-metro"),this._mi=new a.ModelIncidents,this._ml=new s.ModelLines,this._mp=new d.ModelPredictions,this._ms=new l.ModelStations}return e.prototype.render=function(){return(new r.MenuView).container(this._container.querySelector(".section-menu")).render().start(),this._mView=(new i.MainView).displayMode(this._isDesktop).metroIncidents(this._mi).metroPredictions(this._mp).container(this._container).metroLines(this._ml).metroStations(this._ms).render(),(new o.MapView).pdfFile("images/color_map_silverline.pdf").container(this._container.querySelector(".section-map")).render().start(),this._iView=(new n.IncidentsView).metroLines(this._ml).metroStations(this._ms).container(this._container.querySelector(".section-alerts .incidents-container")).render(),this._mql.addListener(this.handleMatchMedia),this},e.prototype.start=function(){var e=this,t=function(){c.MetroServices.predictions().then(function(t){e._mp.active=t},function(e){console.error("error loading predictions:",e)}),c.MetroServices.incidents().then(function(t){e._mi.active=t},function(e){console.error("error loading incidents:",e)})};return this._iView.start(),this._mView.start(),this._ml.active={code:"BL",name:"Blue"},h.Observer.monitor(this._mi,"active",this._iView,this._iView.updateIncidents),t(),this._intervalId=setInterval(function(){t()},this._interval),this},e.PREDICTION_INTERVER=15e3,e}();t.MetroController=u}),define("main",["require","exports","./app/MetroController"],function(e,t,n){requirejs.config({baseUrl:".",paths:{pdfjs:"javascript/lib/pdf.combined"},shim:{pdfjs:{exports:"PDFJS"}}}),e(["pdfjs"],function(){var e=function(){console.log("XXX READY!!!"),(new n.MetroController).render().start()};return"loading"!==document.readyState?void e():void document.addEventListener("DOMContentLoaded",function(){e(),document.removeEventListener("DOMContentLoaded",this,!1)},!1)})});